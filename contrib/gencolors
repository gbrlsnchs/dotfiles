#!/usr/bin/env sh

background="1d1f21"
foreground="c5c8c6"
color0="282a2e"
color1="a54242"
color2="8c9440"
color3="de935f"
color4="5f819d"
color5="85678f"
color6="5e8d87"
color7="707880"
color8="373b41"
color9="cc6666"
color10="b5bd68"
color11="f0c674"
color12="81a2be"
color13="b294bb"
color14="8abeb7"
color15="c5c8c6"

# Clean directories first.
for template in **/template/*; do
	outdir=$(dirname $template)
	outdir=$XDG_CACHE_HOME/dotfiles/${outdir%/template}

	mkdir -p $outdir || continue

	file=$outdir/$(basename $template)

	sed --expression "s/{{notice}}/This file was generated by a script, don't touch it!/g" \
		--expression "s/{{background}}/$background/g" \
		--expression "s/{{foreground}}/$foreground/g" \
		--expression "s/{{color0}}/$color0/g" \
		--expression "s/{{color1}}/$color1/g" \
		--expression "s/{{color2}}/$color2/g" \
		--expression "s/{{color3}}/$color3/g" \
		--expression "s/{{color4}}/$color4/g" \
		--expression "s/{{color5}}/$color5/g" \
		--expression "s/{{color6}}/$color6/g" \
		--expression "s/{{color7}}/$color7/g" \
		--expression "s/{{color8}}/$color8/g" \
		--expression "s/{{color9}}/$color9/g" \
		--expression "s/{{color10}}/$color10/g" \
		--expression "s/{{color11}}/$color11/g" \
		--expression "s/{{color12}}/$color12/g" \
		--expression "s/{{color13}}/$color13/g" \
		--expression "s/{{color14}}/$color14/g" \
		--expression "s/{{color15}}/$color15/g" \
		$template > $file || continue
	echo "Generated file from template: $file"
done
